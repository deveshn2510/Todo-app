<style>
        .todo-checked{
            text-decoration: line-through;
        }
        .t{
            font-size: large;
        }
    </style>
    <h1>Todo</h1>
<ul id="list">
</ul>
<input type="text" id="inputid"></input>
<button  id="buttonid" onclick="additem()">Submit</button>
<script>
fetch("/todo").then(function(resp){
        resp.text().then(function(data){
       var data_todo=JSON.parse(data);
        var todo_div=document.getElementById("list");
        todo_div.innerHTML="";
        var list_items=data_todo.task;
        //console.log(list_items);
        for(var i=0;i<list_items.length;i++){
         //   todo_div.innerHTML+="<li>"+list_items[i]+"<li>";
        var liele=document.createElement("li");
        var checkboxele=document.createElement("input");
        checkboxele.type="checkbox";
        checkboxele.id=list_items[i].idt        
        liele.innerHTML=list_items[i].title;
        liele.appendChild(checkboxele);
        todo_div.append(liele);
        checkboxele.onclick=function onchecked(){
         this.parentElement.classList.add("todo-checked")
           var idc=this.id;
            if(this.checked){
    //this.parentElement.classList.add("todo-checked")
    fetch(`todo/ref?id=${idc}`).then(function(data){
  })
           }
else
{
  this.parentElement.classList.remove("todo-checked")
fetch(`todo/ref?id=${idc}`).then(function(resp){
        return resp.text().then(function(data){
        })
    })
     }       
 }
      //checkboxele.checked=list_items[i].checked;
        if(list_items[i].checked){
            liele.classList.add("todo-checked");
        }
        else
        {
            liele.classList.remove("todo-checked");
        }
    }
        })
    });
function additem(){
var val=document.getElementById("inputid").value;
fetch(`todo/add?todoname=${val}`).then(function(resp){
    return resp.json()
}).then(function(data){
        var todo_div=document.getElementById("list");
        var liele=document.createElement("li");
        var checkboxele=document.createElement("input");
        checkboxele.type="checkbox";
        checkboxele.id=data;
        checkboxele.onclick=function oncheck(){
        var idc=this.id;
            if(this.checked){
    this.parentElement.classList.add("todo-checked")
    fetch(`todo/ref?id=${idc}`).then(function(){
    })
    }
    else{
    this.parentElement.classList.remove("todo-checked")
    fetch(`todo/ref?id=${idc}`).then(function(resp){
        return resp.text().then(function(data){
        })
    })
    }  
};
        checkboxele.checked=false;
        liele.innerHTML=val;
        liele.appendChild(checkboxele);
        todo_div.append(liele);
})
}
</script>